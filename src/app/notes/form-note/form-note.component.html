<div class="flex flex-col gap-3">
  <div class="p-4 flex">
    <h1 class="font-bold">Formulaire note</h1>
    <!-- <h1>State: {{state}}</h1> -->
  </div>
  <div class="w-full h-full justify-center p-4">
    <form class="flex flex-col" [formGroup]="noteForm" (ngSubmit)="onSubmitForm()">
      <mat-form-field>
        <mat-label>Nom</mat-label>
        <input matInput placeholder="John" formControlName="nom" required type="text" />
        <mat-error *ngIf="noteForm.get('nom')?.invalid">
          {{ getNomErrorMessage()}}
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Matricule</mat-label>
        <input matInput placeholder="100000" formControlName="matricule" required type="text" />
        <mat-error *ngIf="noteForm.get('matricule')?.invalid">
          {{ getNomErrorMessage()}}
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Note</mat-label>
        <input matInput placeholder="100000" formControlName="note" required type="number" />
        <mat-error *ngIf="noteForm.get('note')?.invalid">
          {{ getNomErrorMessage()}}
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Remarque</mat-label>
        <textarea matInput formControlName="remarque" cdkTextareaAutosize #autosize="cdkTextareaAutosize"
          cdkAutosizeMinRows="1" cdkAutosizeMaxRows="5"></textarea>
        <mat-error *ngIf="noteForm.get('note')?.invalid">
          {{ getNomErrorMessage()}}
        </mat-error>
      </mat-form-field>
      <mat-form-field>
        <mat-label>Choisir une date</mat-label>
        <input matInput [matDatepicker]="picker" formControlName="dateDeRendu">
        <mat-hint>DD/MM/YYYY</mat-hint>
        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
        <mat-datepicker #picker></mat-datepicker>
      </mat-form-field>
      <div>
        <button mat-raised-button color="primary" ripple>
          <div class="flex gap-3">
            @if(state === "pending"){
            <span>
              <mat-spinner class="mat-spinner-color" [diameter]="20"></mat-spinner>
            </span>
            }
            @else{
            <span>
              Valider
            </span>
            }
          </div>
        </button>
      </div>
    </form>
  </div>
</div>